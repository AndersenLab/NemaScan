// configuration for google pipeline API debug 
docker {
    enabled = true
}

process {
    executor = 'google-batch'
    machineType = "n1-standard-1"

    withLabel: n1standard2 {
      machineType = 'n1-standard-2'
    }

    withLabel: n1standard4 {
      machineType = 'n1-standard-4'
    }

    withLabel: n1standard8 {
      machineType = 'n1-standard-8'
    }

    withLabel: n1highmem2 {
      machineType = 'n1-highmem-2'
    }

    withLabel: n1highmem4 {
      machineType = 'n1-highmem-4'
    }

    withLabel: n1highmem8 {
      machineType = 'n1-highmem-8'
    }

    withLabel: local {
      container = 'andersenlab/gcp-local:20250801'
    }

}


// GCP specific params
google {
    project = "${params.google_project}"
    location = "${params.google_zone}"
    batch {
        serviceAccountEmail = "${params.google_service_account_email}"
        debug = true
        preemptible = true
    }
}


executor {
    queueSize = 500
}

params {
    gcp        = true
    annotate   = null
    sthresh    = "EIGEN"
    platform   = ""
    anaconda   = ""
    mapping    = true
    matrix     = false
    simulate   = false
    species    = "c_elegans"
    mediation  = false
    eigen_mem  = "10 GB"  
    bucket     = null
} 

workDir = "${params.work_dir}"
